var trmrk;(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{FsEntriesRetriever:()=>d,FsEntry:()=>n,allWsRegex:()=>r,forEach:()=>s,isNonEmptyStr:()=>i,retrieveFsEntries:()=>o});const r=/^\s+$/g,i=(e,t=!1)=>{let i="string"==typeof e;i=i&&""!==e,i&&t&&(i=r.test(e))},s=(e,t)=>{for(let r=0;r<e.length&&!1!==t(e[r],r,e);r++);},o=async(e,t,r)=>(await r(e,t)).map((i=>new n(e,i.name,t,i.isFolder?r:null)));class n{parentDirPath;name;dirSepStr;isFolder;childNodes;isIncluded=!1;isExcluded=!1;isResolved=!1;resolved=[];folderFsEntriesRetriever;childrenCount=0;resolvedChildrenCount=0;constructor(e,t,r="/",i){this.parentDirPath=e,this.name=t,this.dirSepStr=r,this.isFolder=!!i,this.childNodes=null,this.folderFsEntriesRetriever=i??(async()=>{throw new Error("Calling this method on a file entry is not allowed")})}async forEachChild(e){await this.assureChildrenRetrieved(),s(this.childNodes,e)}exclude(){const e=this.isResolved;this.isExcluded=!0,this.isIncluded=!1,this.isResolved=!0,e||this.onResolved()}async include(e=0){const t=this.isResolved;if(this.isIncluded=!0,this.isExcluded=!1,this.isFolder){if(e>0){const t=e-1;await this.forEachChild((e=>{e.include(t)}))}else await this.assureChildrenRetrieved();0===this.childrenCount&&(this.isResolved=!0,this.onResolved())}else t||(this.isResolved=!0,this.onResolved())}async retrieveChildren(){const e=[this.parentDirPath,this.name].join(this.dirSepStr),t=await o(e,this.dirSepStr,this.folderFsEntriesRetriever);return s(t,(e=>{e.resolved.push((()=>{let e=!0;return this.resolvedChildrenCount++,this.resolvedChildrenCount>=this.childrenCount&&(this.onResolved(),e=!1),e}))})),[t,t.length]}async assureChildrenRetrieved(){if(!this.childNodes){const[e,t]=await this.retrieveChildren();this.childNodes=e,this.childrenCount=t}}onResolved(){for(let e of this.resolved)e(this)}}class d{rootParentPath;rootDirName;dirSepStr;folderFsEntriesRetriever;fsEntriesRetrieverFunc;rootPath;constructor(e,t,r="/",i,s){this.rootParentPath=e,this.rootDirName=t,this.dirSepStr=r,this.folderFsEntriesRetriever=i,this.fsEntriesRetrieverFunc=s,this.rootPath=[e,t].join(r)}run(){return new Promise(((e,t)=>{const r=new n(this.rootParentPath,this.rootDirName,this.dirSepStr,this.folderFsEntriesRetriever);r.resolved.push((t=>{e(t)})),this.fsEntriesRetrieverFunc(r)}))}}trmrk=t})();