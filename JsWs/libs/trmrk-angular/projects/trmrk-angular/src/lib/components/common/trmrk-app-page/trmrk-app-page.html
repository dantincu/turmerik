<trmrk-app-bar
  [trmrkLeadingTemplate]="trmrkAppBarLeadingTemplate"
  [trmrkTitle]="trmrkAppBarTitle"
  [trmrkCssClass]="trmrkAppBarCssClass"
  [trmrkHomePageRouterLink]="trmrkAppBarHomePageRouterLink"
  [trmrkBeforeTitleTemplate]="trmrkAppBarBeforeTitleTemplate"
  [trmrkShowBackBtn]="trmrkAppBarShowBackBtn"
  [trmrkBackBtnClicked]="trmrkAppBarBackBtnClicked"
  [trmrkToggleBackBtnDisabled]="trmrkAppBarToggleBackBtnDisabled"
  [trmrkShowGoToParentBtn]="trmrkAppBarShowGoToParentBtn"
  [trmrkGoToParentBtnDisabled]="trmrkAppBarGoToParentBtnDisabled"
  [trmrkGoToParentBtnClicked]="trmrkAppBarGoToParentBtnClicked"
  [trmrkGoToParentRouterLink]="trmrkAppBarGoToParentRouterLink"
  [trmrkTrailingTemplate]="appBarTrailingTemplate"
></trmrk-app-bar>
<ng-template #appBarTrailingTemplate>
  <ng-container *ngTemplateOutlet="trmrkAppBarTrailingTemplate"></ng-container>
  @if (trmrkShowOptionsBtn ?? appStateService.defaults.show.appBar.optionsBtn) {
  <button
    mat-icon-button
    class="trmrk-icon-btn trmrk-options-btn"
    [matMenuTriggerFor]="null"
    #optionsMenuTrigger="matMenuTrigger"
    (click)="optionsMenuBtnClick($event)"
  >
    <mat-icon class="trmrk-icon">more_vert</mat-icon>
  </button>
  <mat-menu class="trmrk-menu" dense>
    @if (trmrkShowMainMenuTopStrip ?? appStateService.defaults.show.mainMenuTopStrip) {
    <div mat-menu-item class="trmrk-menu-item">
      @if (trmrkShowRefreshMenuBtn ?? appStateService.defaults.show.mainMenu.refreshBtn) {
      <button mat-icon-button class="trmrk-icon-btn" (click)="refreshMenuBtnClick($event)">
        <mat-icon class="trmrk-icon">refresh</mat-icon>
      </button>
      } @if (trmrkShowManageTabsMenuBtn ?? appStateService.defaults.show.mainMenu.manageTabsBtn) {
      <button mat-icon-button class="trmrk-icon-btn">
        <div class="trmrk-custom-svg-icon-wrapper" [innerHtml]="tabGroupIcon"></div>
      </button>
      } @if (trmrkShowDupplicateTabMenuBtn ??
      appStateService.defaults.show.mainMenu.duplicateTabBtn) {
      <button mat-icon-button class="trmrk-icon-btn">
        <div class="trmrk-custom-svg-icon-wrapper" [innerHtml]="tabDuplicateIcon"></div>
      </button>
      } @if (trmrkShowShareMenuBtn ?? appStateService.defaults.show.mainMenu.shareBtn) {
      <button mat-icon-button class="trmrk-icon-btn">
        <mat-icon class="trmrk-icon">share</mat-icon>
      </button>
      } @if (trmrkShowUserProfileMenuBtn ?? appStateService.defaults.show.mainMenu.userProfileBtn) {
      <trmrk-app-link
        [trmrkRouterLink]="[
          [appConfig.value.routeBasePath, defaultCommonChildRouteKeys.UserProfile].join('/')
        ]"
      >
        <button mat-icon-button class="trmrk-icon-btn">
          <mat-icon class="trmrk-icon">account_circle</mat-icon>
        </button>
      </trmrk-app-link>
      } @if (trmrkShowManageAppMenuBtn ?? appStateService.defaults.show.mainMenu.manageAppBtn) {
      <trmrk-app-link
        [trmrkRouterLink]="[
          [appConfig.value.routeBasePath, defaultCommonChildRouteKeys.ManageApp].join('/')
        ]"
      >
        <button mat-icon-button class="trmrk-icon-btn">
          <mat-icon class="trmrk-icon">settings_applications</mat-icon>
        </button></trmrk-app-link
      >
      } @if (trmrkShowSettingsMenuBtn ?? appStateService.defaults.show.mainMenu.settingsBtn) {
      <trmrk-app-link
        [trmrkRouterLink]="[
          [appConfig.value.routeBasePath, defaultMainCommonChildRouteKeys.Settings].join('/')
        ]"
        ><button mat-icon-button class="trmrk-icon-btn">
          <mat-icon class="trmrk-icon">settings</mat-icon>
        </button></trmrk-app-link
      >
      } @if (trmrkShowHomeMenuBtn ?? appStateService.defaults.show.mainMenu.homeBtn) {
      <trmrk-app-link [trmrkRouterLink]="[appConfig.value.routeBasePath]"
        ><button mat-icon-button class="trmrk-icon-btn">
          <mat-icon class="trmrk-icon">home</mat-icon>
        </button></trmrk-app-link
      >
      } @if (trmrkShowHelpMenuBtn ?? appStateService.defaults.show.mainMenu.helpBtn) {
      <trmrk-app-link
        [trmrkRouterLink]="
          [appConfig.value.routeBasePath, defaultCommonChildRouteKeys.Help].join('/')
        "
        ><button mat-icon-button class="trmrk-icon-btn">
          <mat-icon class="trmrk-icon">help</mat-icon>
        </button></trmrk-app-link
      >
      }
    </div>
    }
    <ng-container *ngTemplateOutlet="trmrkOptionsMenuTemplate"></ng-container>
  </mat-menu>
  }
</ng-template>

<div
  [ngClass]="[
    'trmrk-app-page-body trmrk-height-diff-x1',
    trmrkCssClass ?? '',
    trmrkIsScrollableY
      ? 'trmrk-scrollable trmrk-scrollable-y'
      : trmrkIsScrollableY === false
      ? 'trmrk-overflow-y-hidden'
      : ''
  ]"
>
  <ng-content></ng-content>
</div>
