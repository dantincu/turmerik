<div class="trmrk-output-wrapper">
  <span class="trmrk-text">{{ isNaN(value.number ?? NaN) ? '' : value.number }}</span>
</div>
@if (hasError) {
<div class="trmrk-error-wrapper">
  <span class="trmrk-text-level-error"> {{ errorMessage }} </span>
</div>
}
<trmrk-short-string-editor
  [trmrkDigitsOnly]="true"
  [trmrkInputAttrs]="{
    min: minValue.toString(),
    max: maxValue.toString(),
    step: step.toString(),
  }"
  [trmrkCharCssClassFactory]="getCharCssClass"
  [trmrkString]="value.text!"
  [trmrkFocusedCharIdx]="focusedCharIdx"
  [trmrkFocusInput]="focusInput"
  [trmrkBlurInput]="blurInput"
  [trmrkAllowInsertChar]="true"
  [trmrkAllowInsertChar]="true"
  [trmrkAllowDeleteChar]="true"
  [trmrkBeforeDoneBtnTemplate]="beforeDoneBtnTpl"
  [trmrkTrailingTemplate]="trailingTpl"
  [trmrkShowDoneBtn]="true"
  (trmrkCharShortPressOrLeftClick)="charShortPressOrLeftClick($event)"
  (trmrkInputKeyPressed)="inputKeyPressed($event)"
  (trmrkInputKeyDown)="inputKeyDown($event)"
  (trmrkCharDeleteBtnLongPressOrRightClick)="charDeleteBtnLongPressOrRightClick($event)"
  (trmrkCharDeleteBtnShortPressOrLeftClick)="charDeleteBtnShortPressOrLeftClick($event)"
  (trmrkCharBackspaceBtnLongPressOrRightClick)="charBackspaceBtnLongPressOrRightClick($event)"
  (trmrkCharBackspaceBtnShortPressOrLeftClick)="charBackspaceBtnShortPressOrLeftClick($event)"
  (trmrkCharInsertBtnLongPressOrRightClick)="charInsertBtnLongPressOrRightClick($event)"
  (trmrkCharInsertBtnShortPressOrLeftClick)="charInsertBtnShortPressOrLeftClick($event)"
  (trmrkDoneBtnTouchStartOrMouseDown)="doneBtnTouchStartOrMouseDown($event)"
></trmrk-short-string-editor>
<ng-template #beforeDoneBtnTpl>
  @if (maxAllowedDecimals > 0) {
  <div class="trmrk-icon-wrapper trmrk-decimal-point" (click)="moveDecimalPlaceClicked()">
    <div class="trmrk-char-btn">.</div>
  </div>
  } @if (minValue < 0) {
  <div
    [ngClass]="[
      'trmrk-icon-wrapper',
      (value.number ?? 0) >= 0 ? 'trmrk-minus-sign' : 'trmrk-plus-sign'
    ]"
    (click)="toggleSignClicked()"
  >
    <div class="trmrk-char-btn">{{ (value.number ?? 0) >= 0 ? '-' : '+' }}</div>
  </div>
  }
</ng-template>
<ng-template #trailingTpl></ng-template>
