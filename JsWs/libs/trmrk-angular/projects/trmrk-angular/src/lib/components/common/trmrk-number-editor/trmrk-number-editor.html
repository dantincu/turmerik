@if ((trmrkLabel ?? null) !== null) {
<div class="trmrk-label-wrapper">
  <div class="trmrk-field">
    @if (trmrkIsTogglable) {
    <mat-checkbox class="trmrk-checkbox" (change)="labelCheckboxToggled()" [checked]="!hide"
      >@if (!trmrkLabelTemplate) {
      <h3>{{ trmrkLabel }}</h3>
      } @if (trmrkLabelTemplate) {
      <ng-container
        *ngTemplateOutlet="trmrkLabelTemplate; context: { label: trmrkLabel }"
      ></ng-container>
      }</mat-checkbox
    >
    } @if (!trmrkIsTogglable) { @if (!trmrkLabelTemplate) {
    <h3>{{ trmrkLabel }}</h3>
    } @if (trmrkLabelTemplate) {
    <ng-container
      *ngTemplateOutlet="trmrkLabelTemplate; context: { label: trmrkLabel }"
    ></ng-container>
    } }
  </div>
</div>
} @if (!hide) { @if (trmrkShowOutput) {
<div class="trmrk-output-wrapper">
  <span class="trmrk-text">{{ isNaN(value.number ?? NaN) ? '' : value.number }}</span>
</div>
} @if (hasError) {
<div class="trmrk-error-wrapper">
  <span class="trmrk-text-level-error"> {{ errorMessage }} </span>
</div>
}
<trmrk-short-string-editor
  [trmrkDigitsOnly]="true"
  [trmrkInputAttrs]="inputAttrs"
  [trmrkCharCssClassFactory]="getCharCssClass"
  [trmrkString]="value.text!"
  [trmrkFocusedCharIdx]="focusedCharIdx"
  [trmrkFocusInput]="focusInput"
  [trmrkBlurInput]="blurInput"
  [trmrkAllowInsertChar]="trmrkAllowInsertChar"
  [trmrkAllowDeleteChar]="trmrkAllowDeleteChar"
  [trmrkBeforeDoneBtnTemplate]="beforeDoneBtnTpl"
  [trmrkTrailingTemplate]="trailingTpl"
  [trmrkShowDoneBtn]="trmrkShowDoneBtn"
  [trmrkShowCopyToClipboardBtn]="trmrkShowCopyToClipboardBtn"
  [trmrkShowPasteFromClipboardBtn]="trmrkShowPasteFromClipboardBtn"
  (trmrkCharShortPressOrLeftClick)="charShortPressOrLeftClick($event)"
  (trmrkInputKeyPressed)="inputKeyPressed($event)"
  (trmrkInputKeyDown)="inputKeyDown($event)"
  (trmrkCharDeleteBtnLongPressOrRightClick)="charDeleteBtnLongPressOrRightClick($event)"
  (trmrkCharDeleteBtnShortPressOrLeftClick)="charDeleteBtnShortPressOrLeftClick($event)"
  (trmrkCharBackspaceBtnLongPressOrRightClick)="charBackspaceBtnLongPressOrRightClick($event)"
  (trmrkCharBackspaceBtnShortPressOrLeftClick)="charBackspaceBtnShortPressOrLeftClick($event)"
  (trmrkCharInsertBtnLongPressOrRightClick)="doNothing()"
  (trmrkCharInsertBtnShortPressOrLeftClick)="charInsertBtnShortPressOrLeftClick($event)"
  (trmrkDoneBtnTouchStartOrMouseDown)="doneBtnTouchStartOrMouseDown($event)"
  (trmrkPasteFromClipboardClicked)="pasteFromClipboardClicked($event)"
></trmrk-short-string-editor>
<ng-template #beforeDoneBtnTpl>
  @if (minValue < 0) {
  <div
    [ngClass]="[
      'trmrk-icon-wrapper',
      (value.number ?? 0) >= 0 ? 'trmrk-minus-sign' : 'trmrk-plus-sign'
    ]"
    (trmrkLongPressOrRightClick)="doNothing()"
    (trmrkShortPressOrLeftClick)="toggleSignClicked()"
  >
    <div class="trmrk-char-btn">{{ (value.number ?? 0) >= 0 ? '-' : '+' }}</div>
  </div>
  } @if (maxAllowedDecimals > 0) {
  <div
    class="trmrk-icon-wrapper trmrk-decimal-point"
    (trmrkLongPressOrRightClick)="doNothing()"
    (trmrkShortPressOrLeftClick)="moveDecimalPlaceClicked()"
  >
    <div class="trmrk-char-btn">.</div>
  </div>
  } @if (trmrkShowIncrementBtns ?? true) {
  <div class="trmrk-icon-wrapper">
    <button
      mat-icon-button
      class="trmrk-icon-btn"
      (trmrkLongPressOrRightClick)="incrementBtnLongPressOrRightClick()"
      (trmrkShortPressOrLeftClick)="incrementBtnShortPressOrLeftClick()"
    >
      <mat-icon class="trmrk-icon trmrk-font-size-40px">arrow_drop_up</mat-icon>
    </button>
  </div>
  <div class="trmrk-icon-wrapper">
    <button
      mat-icon-button
      class="trmrk-icon-btn"
      (trmrkLongPressOrRightClick)="decrementBtnLongPressOrRightClick()"
      (trmrkShortPressOrLeftClick)="decrementBtnShortPressOrLeftClick()"
    >
      <mat-icon class="trmrk-icon trmrk-font-size-40px">arrow_drop_down</mat-icon>
    </button>
  </div>
  }
</ng-template>
<ng-template #trailingTpl></ng-template>
}
