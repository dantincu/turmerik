<trmrk-app-page [trmrkPageTemplate]="page" [trmrkAppBarTitle]="'App Themes'"></trmrk-app-page>

<ng-template #page
  ><trmrk-list-app-panel
    [trmrkCssClass]="'trmrk-app-themes-panel'"
    [trmrkEntities]="trmrkAppThemesService.entities"
    [trmrkIsLoading]="trmrkAppThemesService.reqStateManager.isLoading"
    [trmrkListItems]="getListItems"
    [trmrkVisuallyMovingListItems]="getCurrentlyMovingListItems"
    [trmrkRowsSelectionIsAllowed]="true"
    [trmrkSelectedRowsReorderIsAllowed]="true"
    [trmrkSelectedRowsReorderAggRowVertIsOriented]="true"
    (trmrkRowsUpdated)="trmrkAppThemesService.rowsUpdated($event)"
    [trmrkRowMenuTemplate]="rowMenuTemplate"
    [trmrkRowTemplate]="rowTemplate"
    [trmrkVisuallyMovingRowTemplate]="visuallyMovingRowTemplate"
    [trmrkTopStripTemplate]="topStripTemplate"
    [trmrkErrorTitle]="trmrkAppThemesService.reqStateManager.errorTitle"
    [trmrkErrorMsg]="trmrkAppThemesService.reqStateManager.errorMsg"
    [trmrkHasError]="trmrkAppThemesService.reqStateManager.hasError"
    [trmrkCanCloseError]="false"
  ></trmrk-list-app-panel>

  <ng-template #rowMenuTemplate>
    <span class="trmrk-menu-item trmrk-text-menu-item">Some action</span>
  </ng-template>

  <ng-template #topStripTemplate>
    <button
      mat-icon-button
      class="trmrk-icon-btn"
      (click)="trmrkAppThemesService.addEntityClick($event)"
    >
      <mat-icon class="trmrk-icon">add</mat-icon>
    </button>
  </ng-template>

  <ng-template #rowTemplate let-row="row" let-idx="idx">
    <trmrk-panel-list-item
      #listItems
      [trmrkMainText]="row.item.data.name"
      [ngClass]="['trmrk-list-item']"
      [trmrkCssClass]="[row.item.isFocused ? 'trmrk-has-border-x2' : '']"
      [trmrkLeadingMatIconName]="'palette'"
      [trmrkIsSelectable]="panelListService.rowsAreSelectable"
      [trmrkIsSelected]="row.item.isSelected"
      [trmrkIsFocused]="row.item.isFocused"
      (trmrkCheckBoxToggled)="panelListService.rowCheckBoxToggled($event, idx)"
      (trmrkLeadingBtnLongPressOrRightClick)="
        panelListService.rowIconLongPressOrRightClick($event, idx)
      "
      (trmrkLeadingBtnShortPressOrLeftClick)="
        trmrkAppThemesService.rowIconShortPressOrLeftClick($event, idx)
      "
      (trmrkLeadingIconBtnMouseDownOrTouchStart)="
        panelListService.rowLeadingIconMouseDownOrTouchStart($event, idx)
      "
      (trmrkTextLongPressOrRightClick)="panelListService.rowTextLongPresOrRightClick($event, idx)"
      (trmrkTextShortPressOrLeftClick)="
        trmrkAppThemesService.rowTextShortPressOrLeftClick($event, idx)
      "
      (trmrkTouchStartOrMouseDown)="panelListService.rowMouseDownOrTouchStart($event, idx)"
      [trmrkInputData]="{ id: row.item.data.id }"
    ></trmrk-panel-list-item>
  </ng-template>

  <ng-template #visuallyMovingRowTemplate let-row="row" let-idx="idx">
    <trmrk-panel-list-item
      #currentlyMovingListItems
      [trmrkMainText]="row.item!.data.name"
      [ngClass]="[
        'trmrk-list-item trmrk-floating-list-item',
        panelListService.showVisuallyMovingRows ? '' : 'trmrk-hidden'
      ]"
      [trmrkCssClass]="[row.item.isFocused ? 'trmrk-has-border-x2' : '']"
      [trmrkLeadingMatIconName]="'palette'"
      [trmrkIsSelectable]="true"
      [trmrkIsSelected]="true"
      [trmrkIsFocused]="row.item.isFocused"
      [trmrkInputData]="{ id: row.item.data.id }"
    ></trmrk-panel-list-item>
  </ng-template>
</ng-template>

<ng-template>
  <trmrk-edit-app-theme-dialog></trmrk-edit-app-theme-dialog>
</ng-template>
