<div #panelList [ngClass]="['trmrk-panel-list', trmrkCssClass ?? '']">
  <div
    [ngClass]="['trmrk-rows-menu-trigger', panelListService.rowsMenuIsOpen ? '' : 'trmrk-invisible']"
    #rowsMenuTrigger="matMenuTrigger"
    #rowsMenuTriggerEl
    [matMenuTriggerFor]="null"
    [matMenuTriggerRestoreFocus]="false"
  ></div>
  <mat-menu [ngClass]="['trmrk-menu']" dense #rowsMenu>
    <ng-container *ngTemplateOutlet="trmrkRowMenuTemplate"></ng-container>
  </mat-menu>

  @for (row of panelListService.rows; track row.id; let idx = $index) { @if
  (row.item && !row.hideItem) {
  <ng-container
    *ngTemplateOutlet="trmrkRowTemplate; context: { row, idx }"
  ></ng-container>
  } @if (row.isBlankPlaceholder) {
  <trmrk-cancel-context-menu
    [ngClass]="['trmrk-horiz-strip trmrk-blank-placeholder', panelListService.slideOutVisuallyMovingRowPlaceholders ? 'trmrk-slide-out' : '']"
  ></trmrk-cancel-context-menu>
  } @if (row.isMultipleSelectedPlaceholder) {
  <trmrk-cancel-context-menu
    class="trmrk-horiz-strip trmrk-multiple-selected-placeholder"
    ><div class="trmrk-user-text">
      {{panelListService.slideOutVisuallyMovingRowPlaceholders ? '' +
      row.multipleSelectedCount + ' item' + (row.multipleSelectedCount! > 1 ?
      's' : '') + ' displaced' : ''}}
    </div>
  </trmrk-cancel-context-menu>
  } } @if (panelListService.visuallyMovingRows) { @for (row of
  panelListService.visuallyMovingRows; track row.id; let idx = $index) {
  <ng-container
    *ngTemplateOutlet="trmrkVisuallyMovingRowTemplate; context: { row, idx }"
  ></ng-container>
  } }
</div>
