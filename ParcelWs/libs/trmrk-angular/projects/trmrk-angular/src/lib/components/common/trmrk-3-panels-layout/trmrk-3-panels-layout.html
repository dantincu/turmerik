<div [ngClass]="cssClass" #containerEl>
  @if (trmrkAlwaysRenderLeftPanel || showLeftPanel) {
  <div
    #leftPanelEl
    [ngClass]="['trmrk-app-panel', 'trmrk-left-panel', showLeftPanel ? '' : 'trmrk-hidden']"
    [ngStyle]="panelStyles[0]"
  >
    <trmrk-horiz-strip
      [trmrkCssClass]="['trmrk-top-horiz-strip', 'trmrk-app-panel-header']"
      [trmrkLeadingTemplate]="leftPanelHeaderLeadingTemplate"
      [trmrkTrailingTemplate]="leftPanelHeaderTrailingTemplate"
    >
    </trmrk-horiz-strip>
    <ng-template #leftPanelHeaderLeadingTemplate></ng-template>
    <ng-template #leftPanelHeaderTrailingTemplate
      >@if (visiblePanelsCount > 1) {
      <button
        mat-icon-button
        class="trmrk-icon-btn"
        (trmrkDrag)="leftPanelResizeBtnDrag($event)"
        (trmrkDragStart)="leftPanelResizeBtnDragStart($event)"
        (trmrkDragEnd)="leftPanelResizeBtnDragEnd($event)"
        [trmrkPreventDefaults]="true"
      >
        <div class="trmrk-custom-svg-icon" [innerHtml]="drag_pan"></div>
      </button>
      }</ng-template
    >
    <div class="trmrk-app-panel-content trmrk-scrollable trmrk-scrollable-y trmrk-scrollable-x">
      <ng-container *ngTemplateOutlet="trmrkLeftPanelTemplate"></ng-container>
    </div>

    @if (isResizingLeftPanel) {
    <div class="trmrk-panel-resize-strip trmrk-stick-right">
      <button mat-icon-button class="trmrk-icon-btn">
        <mat-icon class="trmrk-icon">cancel</mat-icon>
      </button>
    </div>
    }
  </div>
  } @if (trmrkAlwaysRenderMiddlePanel || showMiddlePanel) {
  <div
    [ngClass]="['trmrk-app-panel', 'trmrk-middle-panel', showMiddlePanel ? '' : 'trmrk-hidden']"
    [ngStyle]="panelStyles[1]"
  >
    <trmrk-horiz-strip
      [trmrkCssClass]="['trmrk-top-horiz-strip', 'trmrk-app-panel-header']"
      [trmrkLeadingTemplate]="middlePanelHeaderLeadingTemplate"
      [trmrkTrailingTemplate]="middlePanelHeaderTrailingTemplate"
    ></trmrk-horiz-strip>
    <ng-template #middlePanelHeaderLeadingTemplate></ng-template>
    <ng-template #middlePanelHeaderTrailingTemplate></ng-template>
    <div class="trmrk-app-panel-content trmrk-scrollable trmrk-scrollable-y trmrk-scrollable-x">
      <ng-container *ngTemplateOutlet="trmrkMiddlePanelTemplate"></ng-container>
    </div>
  </div>
  } @if (trmrkAlwaysRenderRightPanel || showRightPanel) {
  <div
    #rightPanelEl
    [ngClass]="['trmrk-app-panel', 'trmrk-right-panel', showRightPanel ? '' : 'trmrk-hidden']"
    [ngStyle]="panelStyles[2]"
  >
    <trmrk-horiz-strip
      [trmrkCssClass]="['trmrk-top-horiz-strip', 'trmrk-app-panel-header']"
      [trmrkLeadingTemplate]="rightPanelHeaderLeadingTemplate"
      [trmrkTrailingTemplate]="rightPanelHeaderTrailingTemplate"
    ></trmrk-horiz-strip>
    <ng-template #rightPanelHeaderLeadingTemplate
      >@if (trmrkAlwaysRenderMiddlePanel || showMiddlePanel) {
      <button
        mat-icon-button
        class="trmrk-icon-btn"
        (trmrkDrag)="rightPanelResizeBtnDrag($event)"
        (trmrkDragStart)="rightPanelResizeBtnDragStart($event)"
        (trmrkDragEnd)="rightPanelResizeBtnDragEnd($event)"
        [trmrkPreventDefaults]="true"
      >
        <div class="trmrk-custom-svg-icon" [innerHtml]="drag_pan"></div>
      </button>
      }</ng-template
    >
    <ng-template #rightPanelHeaderTrailingTemplate></ng-template>
    <div class="trmrk-app-panel-content trmrk-scrollable trmrk-scrollable-y trmrk-scrollable-x">
      <ng-container *ngTemplateOutlet="trmrkRightPanelTemplate"></ng-container>
    </div>
    @if (isResizingRightPanel) {
    <div class="trmrk-panel-resize-strip trmrk-stick-left">
      <button mat-icon-button class="trmrk-icon-btn">
        <mat-icon class="trmrk-icon">cancel</mat-icon>
      </button>
    </div>
    }
  </div>
  }
</div>
